
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="话说Mozilla的Add-on站点最近更新了, 这次更新最显著的特色就是有了完整的中文版页面, 这对广大中国用户来说真是一个好消息. 其他的方面还有可以在线检测扩展对应的firefox版本了, 如果正在使用的浏览器跟扩展不兼任, 那么这个扩展的安装按钮会变成灰色, 也就是说连下载的机会也不会给 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yoursite.com/blog/page/93">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:yoursite.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/categories/gfrog-ride">骑行笔记</a></li>
    <li><a href="/categories/linux">Linux</a></li>
    <li><a href="/categories/picture">美丽图片</a></li>
    <li><a href="/categories/twitter-backup">Tweets</a></li>
    <li><a href="/blog/archives">全部日志</a></li>
    <li><a href="http://about.me/gfrog">关于我</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/04/05/add-on-dot-mozilla-dot-com-updated/">Mozilla的add-on站点更新</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-05T19:34:26+08:00" pubdate data-updated="true">Apr 5<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://www.caribwebdev.com/wp-content/uploads/2007/11/firefox-logo-browser.jpg" alt="" /></p>

<p>话说Mozilla的Add-on站点最近更新了, 这次更新最显著的特色就是有了完整的中文版页面, 这对广大中国用户来说真是一个好消息.</p>

<p>其他的方面还有可以在线检测扩展对应的firefox版本了, 如果正在使用的浏览器跟扩展不兼任, 那么这个扩展的安装按钮会变成灰色, 也就是说连下载的机会也不会给. 这个修改对青蛙来说实在是太痛苦了, 很多插件在firefox3上没法安装, 看来只能望扩展兴叹了.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/26/install-eva-in-debian/">在debian Sid上面安装eva</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-26T09:03:12+08:00" pubdate data-updated="true">Mar 26<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://haokanbu.s3.amazonaws.com/picture/external/c8b6c8df6df744f7af186747f25a35b3.jpeg" alt="debian-ubuntu" /></p>

<p>自从青蛙人品爆发，在pidgin上面死活登录不上QQ以后，青蛙都是在wine上面跑QQ.在wine上面速度慢不说，QQ时不时的来一下非法操作就把青蛙折磨的死去活来。
据说最近eva又升级了，于是青蛙决定换用eva。</p>

<p>Debian的apt里面是没有eva的。青蛙上网搜了一圈，也没有发现eva的升级包，连<a href="http://sourceforge.net/projects/evaq">它的主页</a>上也都还是很久很久以前的版本（大概eva已经转入地下了）。青蛙最后在ubuntu的源里面终于翻倒了eva的deb包了。</p>

<p>eva在ubuntu源的universe里面，随便找一个ubuntu的镜像(青蛙用的是<a href="http://debian.ustc.edu.cn/ubuntu">中科大的源</a>)，在/pool/universe/e/eva目录里找到<a href="http://debian.ustc.edu.cn/ubuntu/pool/universe/e/eva/eva_0.4.9+svn20080215-0ubuntu1_i386.deb">eva_0.4.9+svn20080215-0ubuntu1_i386.deb</a>，下载回来备用。</p>

<p>在正式安装eva之前，青蛙还要搞定它的依赖性问题。</p>

<p>ubuntu里面的eva是依赖于kdelibs4c2a这个包的。但是debian里面的kdelibs4c2a存在一个依赖性的bug：
它依赖于包libopenexr2ldbl，但是这个包在debian的i386源里面竟然没有。</p>

<p>于是青蛙再从ubuntu源里把<a href="http://debian.ustc.edu.cn/ubuntu/pool/main/o/openexr/libopenexr2ldbl_1.2.2-4.4ubuntu1_i386.deb">libopenexr2ldbl</a>给抓回来，dpkg -i安装之，然后执行#aptitude install kdelibs4c2a，安装一系列的依赖包。</p>

<p>顺便说一句，debian跟ubuntu这两个兄弟有时候还真不错，互相谁也不挑谁的，deb包拿过来一般都能直接用。</p>

<p>最后，执行#dpkg -i eva_0.4.9+svn20080215-0ubuntu1_i386.deb，eva安装成功。聊天去也~</p>

<p><img src="http://haokanbu.s3.amazonaws.com/picture/external/c8b6c8df6df744f7af186747f25a35b3.jpeg" alt="eva" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/24/picotux-tiny-linux-device/">世界上最小的linux</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-24T05:50:56+08:00" pubdate data-updated="true">Mar 24<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://www.picotux.com/pt100a.jpg" alt="picotux" /><img src="http://www.picotux.com/pt112a.jpg" alt="" /></p>

<p>上面的图片就是号称世界上最小的linux：<a href="http://www.picotux.com/techdatae.html">picotux 100</a>（右侧为picotux 112）。
这个小东西只有35mm×19mm×19mm大小，只比一个RJ45接口大了那么一点点。
它使用32-bit ARM 7 Netsilicon NS7520处理器，主频55MHz，
搭载2M~4M Flash和8M SDRAM，带有一个10/100M网卡，一个可以达到230.400 bps的串口，还有5个I/O针脚。
使用3.3V电压供电。</p>

<p>软件方面，它使用uClinux 2.4.27系统，系统大小最少720KB。Shell可以使用Busybox，使用CRAMFS、JFFS2文件系统, 还可以使用NFS，
有Webserver、Telnet等等程序。开发工具使用GUN Toolchain，使用GCC3.4.4以上版本和ulibc0.9.26以上版本。</p>

<p>这东东售价最低99欧元。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/22/install-bugzilla-in-dreamhost/">在Dreamhost主机上安装bugzilla</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-22T08:23:55+08:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.bugzilla.org/">bugzilla</a>是<a href="http://www.mozilla.org/">mozilla</a>一个很好的开源bug管理软件，青蛙准备在glinux的开发过程中用它来管理发现的bug。
但是dreamhost上没有bugzilla的自动安装功能，青蛙按照<a href="http://wiki.dreamhost.com/Bugzilla#Installing_Bugzilla">dreamhost的wiki上面介绍的方法</a>安装时，
又有很多perl模块没有，而且在dreamhost的主机上也没有权限安装这些perl模块。所以，青蛙决定先在主机上自己搞一个perl。</p>

<p>perl的安装方法很简单，<a href="http://wiki.dreamhost.com/Perl#Path_to_the_Perl_interpreter">dreamhost的wiki也有介绍</a>。
青蛙选择的是perl5.8.8，因为wiki上头说有一个针对dreamhost环境的补丁要打
（补丁文件在<a href="http://schwern.org/~schwern/src/dreamhost-5.8.8-cwd.patch">这里</a>下载）。
打上补丁以后，执行：</p>

<blockquote><p>sh Configure -Dusethreads -Duselargefiles -Dccflags=-DDEBIAN
-Dcccdlflags=-fPIC -Darchname=i386-linux -Dprefix=~/apps
-Dpager=/usr/bin/sensible-pager -Uafs -Ud_csh -Uusesfio
-Uusenm -Duseshrplib -Dvendorlib=/usr/share/perl5
-Dvendorarch=/usr/lib/perl5 -Dvendorprefix=/usr -Uinstallusrbinperl -des</p></blockquote>

<p>其中Dprefix参数要设置为要安装perl的目录。
config完毕就可以make &amp;&amp; make install了。</p>

<p>下面正式开始安装bugzilla，（青蛙的perl在~/apps/bin目录下，这个目录要换成你自己实际的目录哦），首先进入bugzilla的目录，执行：</p>

<blockquote><p>~/apps/bin/perl chechsetup.pl</p></blockquote>

<p>这个脚本会检查当前的perl环境，如果有缺少的模块，它会给出安装命令。
例如，在青蛙的主机上，Email::Send、Email::MIME::Modifier就被提示安装。
按照这个脚本给出的命令把必须的模块安装上，然后再次执行上面的命令，会在bugzilla目录下生成一个localconfig文件。</p>

<p>修改这个localconfig文件：</p>

<blockquote><p>$webservergroup = &ldquo;apache&#8221;中的apache改为自己真实的组名称，这个组名字可以用groups命令查到。
$db_host = &#8220;localhost&rdquo; 修改为真实的mysql服务器地址。
$db_name = &ldquo;bugs&rdquo; 修改为真实的数据库名。
$db_user = &ldquo;bugs&rdquo; 修改为真实的用户名。
$db_pass = &lsquo;&rsquo; 修改为真实的密码。</p></blockquote>

<p>上面几项都改完后，重新执行checksetup.pl脚本。这时脚本会询问管理员邮箱地址，设置管理员密码等等动作。</p>

<p>因为dreamhost使用suexec方式运行的cgi脚本，所以每次执行完checksetup.pl以后，都要执行以下命令：</p>

<blockquote><p>for i in docs graphs images js skins; do find $i -type d -exec chmod o+rx {} ; ; done
for i in jpg gif css js png html rdf xul; do find . -name *.$i -exec chmod o+r {} ; ; done
find . -name .htaccess -exec chmod o+r {} ;
chmod o+x . data data/webdot</p></blockquote>

<p>完成这些后，bugzilla就算是安装成功啦。可以先用浏览器访问下bugzilla的地址看看效果。</p>

<p>接下来说一下汉化的问题，汉化包可以在<a href="http://bugzilla-cn.googlecode.com/">这里</a>下载到，下载、解压以后，把cn文件夹复制到bugzilla目录里的template/目录就行啦。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/20/markdown-syntax-basic/">Markdown语法摘要</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-20T08:30:34+08:00" pubdate data-updated="true">Mar 20<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://daringfireball.net/projects/Markdown/">Markdown</a>是John Gruber设计的一个文本标记系统，相比html，它很简单，便于手工编写，而且它还支持<a href="http://wordpress.org/">Wordpress</a>，<a href="http://michelf.com/projects/php-Markdown/">有一个用于wordpress的插件</a>。青蛙决定用vim+Markdown来编写blog，看起来他们是一对强大的组合 :)</p>

<p>首先要去<a href="http://www.vim.org/">Vim</a>的官方网站<a href="http://www.vim.org/scripts/script.php?script_id=1242">下载Markdown的语法高亮插件</a>，并把它复制到&#8221;~/.vim/syntax/&ldquo;目录下面。然后，新建一个&rdquo;~/.vim/ftdetect/mkd.vim&#8221;文件，在其中加入下面的内容：</p>

<blockquote><p>&ldquo; markdown filetype file
if exists(&#8220;did_load_filetypes&rdquo;)
finish
endif
augroup markdown
au! BufRead,BufNewFile *.mkd   setfiletype mkd
augroup END</p></blockquote>

<p>并在&#8221;~/.vimrc&#8221;文件中添加如下内容：</p>

<blockquote><p>&ldquo;Markdown language syntax settings
augroup mkd
autocmd BufRead *.mkd  set ai formatoptions=tcroqn2 comments=n:>
augroup END</p></blockquote>

<p>然后，后缀名为&#8221;.mkd&#8221;的文件就能被自动启用Markdown的语法高亮了。</p>

<p>下面是Markdown语法的简要列表，便于以后查阅。以下内容主要从<a href="http://www.leninlee.cn">牧码志</a>整理，感谢leninlee的辛勤劳动。</p>

<ul>
<li>链接的添加，共有三种形式，Markdown支持相对链接。</li>
</ul>


<blockquote><p>&lt;链接> ：这种形式只是简单的标出链接；
<a href="%E9%93%BE%E6%8E%A5" title="标题">文字</a>：给文字添加链接，其中标题是可选的；
[文字][标记]：给文字添加链接，链接在下面的一个以[标记]开头的新行（一般是文章末尾）给出。或者直接以[文字][]这种形式编写，在下面的新行中使用[文字]:链接的形式声明链接。</p></blockquote>

<ul>
<li><p>图片的添加：跟链接比起来，图片只是多了在前面多了一个叹号&#8221;!&ldquo;。</p></li>
<li><p>标题格式：Markdown提供了2种方式。</p></li>
</ul>


<blockquote><p>第一种是在标题前面加上1~6个&#8221;#&ldquo;表示&rdquo;<h1>&ldquo;~&rdquo;<h6>&ldquo;。
第二种是在标题下面另起一行，输入四个以上的等号“=”来表示&rdquo;<h1>&ldquo;，输入四个以上的减号“-”来表示&rdquo;<h2>&ldquo;。</p></blockquote>

<ul>
<li>粗体和斜体：用星号&#8221;*&ldquo;或者下划线&rdquo;_&#8221;</li>
</ul>


<blockquote><p>一个表示斜体；
两个表示粗体；
三个表示粗斜体。</p></blockquote>

<ul>
<li><p>引用内容：就是html标记的&#8221;<blockquote>&ldquo;，只要在行首用右尖括号>就行了。如果要嵌套引用，那就多打几个>。</p></li>
<li><p>原文输出：如果不想Markdown解释某些内容，有两种方式：</p></li>
</ul>


<blockquote><p>第一个是转义为html的&#8221;<pre>&ldquo;标签：要在要原样输出的内容前面加入至少4个空格或者1个tab的宽度；
第二个是转义为&rdquo;<code>&ldquo;标签：给要输出的内容加上&rdquo;`&ldquo;号（就是esc下头那个键）。</p></blockquote>

<ul>
<li><p>无序列表：在文字前面使用星号"*&ldquo;、加号&rdquo;+&ldquo;、减号&rdquo;&ndash;&ldquo;中的任意一个，注意在这些符号后面要留一个空格。</p></li>
<li><p>有序列表：在第一条前添加一个数字，后跟一个英文句点".&ldquo;。无论第一个条目前加的数字是什么，列表都会从1开始计数。</p></li>
<li><p>转义符："&ldquo;。只要给不希望被转义的字符前面加上就可以了。</p></li>
<li><p>HTML实体：如果要在内容中输出"&lt;&ldquo;或者&rdquo;&amp;&ldquo;符号，那么必须用[HTML实体][]代替。Markdown会把HTML的特殊符号直接翻译为HTML实体。</p></li>
<li><p>换行符：Markdown中在一行的末尾使用两个以上的空格标示HTML中的一个换行符"<br/>&ldquo;。</p></li>
<li><p>段落：只要两行之间有一个空行，Markdown就会把它识别为一个段落。
（青蛙在写这篇文章的时候发现，在列表之前一定要加入一个空行，要不然Markdown是不会把"*&ldquo;识别为列表的。）</p></li>
<li><p>水平线：使用三个以上的"*&ldquo;或&rdquo;&ndash;&ldquo;来表示。这些星号跟减号之间可以用空格，如果减号没有空格，
那它必须在单独的一个段落里，要不它会被识别为标题的。</p></li>
<li><p>直接使用HTML标记：有些Markdown不支持的标签可以直接写HTML标记，例如表格。</p></li>
</ul>


<p><strong>update,2008-03-20:</strong> 青蛙发现直接向wordpress写Markdown格式效果真的很差，而且不方便编辑，所以青蛙决定还是在本地把Markdown文档转化为HTML格式再发布到blog上好了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/17/glinux-setup-build-directory/">Glinux开发摘要(2)-构建目录结构</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-17T07:18:34+08:00" pubdate data-updated="true">Mar 17<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>下面的操作步骤青蛙基本上是从<a href="http://www.linuxfromscratch.org/lfs/view/6.3">lfs6.3</a>学来的，所以会有$LFS这个变量，如果你对lfs也有兴趣，可以<a href="http://www.linuxfromscratch.org/">去它的官方网站</a>看看。</p>

<p>青蛙编译完成了toolchain以后，就可以开始建造glinux的目录体系了。
首先，构造虚拟内核文件系统(Virtual Kernel File Systems)，这个东东是跟内核通信的一个途径。</p>

<p>执行下面的命令，来建立文件系统的挂载点：</p>

<blockquote><p>mkdir -pv $LFS/{dev,proc,sys}</p></blockquote>

<p>然后，建立几个必要的设备文件，</p>

<blockquote><p>mknod -m 600 $LFS/dev/console c 5 1</p></blockquote>

<p>  mknod -m 666 $LFS/dev/null c 1 3</p>

<blockquote></blockquote>

<p>青蛙准备用udev来管理设备文件，所以只建立这两个文件就够了，其他文件udev会在系统启动的时候自动创建。
现在udev模块在glinux上还没有安装，所以暂时用mount &mdash;bind命令将宿主系统的/dev目录镜像到glinux的目录结构里来：</p>

<blockquote><p>mount -v &mdash;bind /dev $LFS/dev</p></blockquote>

<p>把几个重要的虚拟文件系统都挂在到glinux的目录上去：</p>

<blockquote><p>mount -vt devpts devpts $LFS/dev/pts</p></blockquote>

<p>  mount -vt tmpfs shm $LFS/dev/shm</p>

<p>  mount -vt proc proc $LFS/proc</p>

<p>  mount -vt sysfs sysfs $LFS/sys</p>

<blockquote></blockquote>

<p>以上几个步骤在每次重新chroot以后都要执行一遍。</p>

<p>上面的步骤都完成，历史性的时刻就要来了：chroot进入glinux。</p>

<blockquote><p>chroot &ldquo;$LFS&rdquo; /tools/bin/env -i HOME=/root TERM=&ldquo;$TERM&rdquo; PS1=&lsquo;u:w$ &rsquo;</p></blockquote>

<pre><code>PATH=/bin:/usr/bin:/sbin:/usr/sbin:/tools/bin /tools/bin/bash --login +h
</code></pre>

<blockquote></blockquote>

<p>看到命令提示符在喊“I have no name!”了么？如果看到它喊了，就说明chroot成功了 :)
进入新系统的第一件事就是要建立glinux的目录结构了，关于linux的目录结构，<a href="http://www.linuxfans.org/">linuxfans</a>上面有<a href="http://www.linuxfans.org/bbs/thread-182534-1-1.html">一篇文章介绍的非常详细</a>，青蛙执行以下命令来建立一个完整的目录结构：</p>

<blockquote><p>mkdir -pv /{bin,boot,etc/opt,home,lib,mnt,opt}</p></blockquote>

<p>  mkdir -pv /{media/{floppy,cdrom},sbin,srv,var}</p>

<p>  install -dv -m 0750 /root</p>

<p>  install -dv -m 1777 /tmp /var/tmp</p>

<p>  mkdir -pv /usr/{,local/}{bin,include,lib,sbin,src}</p>

<p>  mkdir -pv /usr/{,local/}share/{doc,info,locale,man}</p>

<p>  mkdir -v  /usr/{,local/}share/{misc,terminfo,zoneinfo}</p>

<p>  mkdir -pv /usr/{,local/}share/man/man{1..8}</p>

<p>  for dir in /usr /usr/local; do</p>

<p>   ln -sv share/{man,doc,info} $dir</p>

<p>  done</p>

<p>  mkdir -v /var/{lock,log,mail,run,spool}</p>

<p>  mkdir -pv /var/{opt,cache,lib/{misc,locate},local}</p>

<blockquote></blockquote>

<p>然后，把/tools/目录下的一些文件链接到chroot环境对应的目录下：</p>

<blockquote><p>ln -sv /tools/bin/{bash,cat,echo,grep,pwd,stty} /bin</p></blockquote>

<p>  ln -sv /tools/bin/perl /usr/bin</p>

<p>  ln -sv /tools/lib/libgcc_s.so{,.1} /usr/lib</p>

<p>  ln -sv /tools/lib/libstdc++.so{,.6} /usr/lib</p>

<p>  ln -sv bash /bin/sh</p>

<blockquote></blockquote>

<p>建立一个/etc/mtab文件：</p>

<blockquote><p>touch /etc/mtab</p></blockquote>

<p>建立/etc/passwd文件和/etc/group文件：</p>

<blockquote><p>cat > /etc/passwd &lt;&lt; &ldquo;EOF&rdquo;</p></blockquote>

<p>  root:x:0:0:root:/root:/bin/bash</p>

<p>  nobody:x:99:99:Unprivileged User:/dev/null:/bin/false</p>

<p>  EOF</p>

<blockquote><p>cat > /etc/group &lt;&lt; &ldquo;EOF&rdquo;</p></blockquote>

<p>  root:x:0:</p>

<p>  bin:x:1:</p>

<p>  sys:x:2:</p>

<p>  kmem:x:3:</p>

<p>  tty:x:4:</p>

<p>  tape:x:5:</p>

<p>  daemon:x:6:</p>

<p>  floppy:x:7:</p>

<p>  disk:x:8:</p>

<p>  lp:x:9:</p>

<p>  dialout:x:10:</p>

<p>  audio:x:11:</p>

<p>  video:x:12:</p>

<p>  utmp:x:13:</p>

<p>  usb:x:14:</p>

<p>  cdrom:x:15:</p>

<p>  mail:x:34:</p>

<p>  nogroup:x:99:</p>

<p>  EOF</p>

<blockquote></blockquote>

<p>然后重新运行一次bash，让bash不再喊“I have no name!”</p>

<blockquote><p>exec /tools/bin/bash &mdash;login +h</p></blockquote>

<p>接下来再建立一些要用到的log文件：</p>

<blockquote><p>touch /var/run/utmp /var/log/{btmp,lastlog,wtmp}</p></blockquote>

<p>  chgrp -v utmp /var/run/utmp /var/log/lastlog</p>

<p>  chmod -v 664 /var/run/utmp /var/log/lastlog</p>

<blockquote></blockquote>

<p>到这里，glinux的目录结构基本上搞定了，下面我们就可以制作内核跟busybox了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/17/glinux-setup-compile-environment/">Glinux开发摘要(1)&#8211;编译环境制作</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-17T03:16:47+08:00" pubdate data-updated="true">Mar 17<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在uty同学的积极鼓励下，青蛙开始了glinux下一个版本的制作（关于glinux的历史，欢迎回顾青蛙从前的日志）。
一开始，青蛙准备利用debian现成的编译环境，但是后来突然想自己构建一个工具链比较好。工具稳定下来，做出来的东西才比较有保障。于是，青蛙从新拾起lfs，开始第二轮lfs征程，不过这次lfs只做三分之一，青蛙的目标就是：lfs6.3的Toolschain。
具体操作过程没啥好说的，简单的step by step就好，但是在制作过程中，遇到了几个bug（可能也算不上bug，可能是青蛙系统的原因）。</p>

<p>这第一个，就是在glibc-2.5.1这步，会遇到下面这个错误：</p>

<blockquote><p>mawk: scripts/gen-sorted.awk: line 19: regular expression compile failed (bad class &mdash; [], [^] or [)
/[^
mawk: scripts/gen-sorted.awk: line 19: syntax error at or near ]
mawk: scripts/gen-sorted.awk: line 19: runaway regular expression /, &ldquo;&rdquo;, subd &hellip;</p></blockquote>

<p>再往上翻还有这么一句：</p>

<blockquote><p>mawk: scripts/gen-sorted.awk: line 19: syntax error at or near ]</p></blockquote>

<p>拿google一划拉，发现这个错误是因为青蛙系统上用了mawk的问题，据说换用gawk可以解决。
在babble.com上面<a href="http://www.nabble.com/small-fix-for-crosstool-with-glibc-2.7-td13448350.html">有人给出了一个patch</a>，很简单，给三个地方加个“”就ok了。但是这个patch是给glibc2.7用的，在lfs6.3里带的glibc2.5.1里面没法直接用。青蛙按图索骥，改了这个gen-sorted.awk，就没有上头那些错误了。
虽说一个补丁可以解决这个问题，但是<a href="http://www.linuxquestions.org/questions/showthread.php?p=2969014#post2969014">有前辈告诉我们</a>，lfs里面的用的都是awk的脚本，如果用mawk很有可能不会有正确的结果，所以建议大家还是安装gawk的好。
gawk源码<a href="http://ftp.gnu.org/pub/gnu/gawk/">在这里下载</a>，debian系的系统只需要aptitude install gawk就好了。其他发行版要注意检查/etc/alternatives/awk是不是正确指向了gawk。</p>

<p>（顺路说一句，cpu在卖力的cc的时候正好可以过来写blog，真是很不错，可以随时把过程记录下来 :p）</p>

<p>第二个错误是在glibc2.5.1的make check过程中：</p>

<blockquote><p>/tools/bin/ld: cannot find -lstdc++
collect2: ld returned 1 exit status
make[2]: <strong><em> [/mnt/lfs/sources/glibc-build/nptl/tst-cancel24] Error 1
make[2]: Target <code>tests' not remade because of errors.
make[1]: *** [nptl/tests] Error 2
make[1]: Target</code>check&#8217; not remade because of errors.
make: </em></strong> [check] Error 2</p></blockquote>

<p>青蛙没有找到这个错误的原因，大概就像lfs文档里说的，第一次编译lfs跟宿主系统依赖关系太大的原因造成的。</p>

<p>第三个错误发生在bash3.2的make过程中，它会提示没有找到yacc这个程序，解决方法很简单，通过apt装上就好了。</p>

<p>到这里，工具链的制作就完成了，下一步就可以制作系统的目录结构并编译内核了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/10/network-protocol-learning-notes-1-basic-knowledge-of-dns/">网络协议学习笔记（1） &#8211; DNS基础知识</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-10T06:42:23+08:00" pubdate data-updated="true">Mar 10<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>下列 RFC 包含用来设计和实施 DNS 服务器和客户端服务的规范：</p>

<p>RFC</p>

<p>标题</p>

<p>1034</p>

<p>域名 &ndash; 概念和工具</p>

<p>1035</p>

<p>域名 &ndash; 实现和规范</p>

<p>1123</p>

<p>Internet 主机 &ndash; 应用和支持的要求</p>

<p>1886</p>

<p>支持 IP 版本 6 的 DNS 扩展名</p>

<p>1995</p>

<p>DNS 中的增量区域传输</p>

<p>1996</p>

<p>提示通知区域更改的机制 (DNS NOTIFY)</p>

<p>2136</p>

<p>域名系统中的动态更新 (DNS UPDATE)</p>

<p>2181</p>

<p>对 DNS 规范的说明</p>

<p>2308</p>

<p>DNS 查询的负缓存 (DNS NCACHE)</p>

<p>2535</p>

<p>域名系统安全扩展 (DNSSEC)</p>

<p>2671</p>

<p>DNS 的扩展机制 (EDNS0)</p>

<p>2782</p>

<p>指定服务位置的 DNS RR (DNS SRV)</p>

<p>2930</p>

<p>DNS 的密钥建立 (TKEY RR)</p>

<p>3645</p>

<p>DNS (GSS-TSIG) 密钥事务身分验证的通用安全服务算法</p>

<p>3646</p>

<p>IPv6 (DHCPv6) 动态主机配置协议的 DNS 配置选项</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/04/vmware6-installation-in-2-6-24-kernel/">历经坎坷，安装VMWARE6</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-04T08:43:44+08:00" pubdate data-updated="true">Mar 4<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>青蛙被vmware郁闷了整整一晚上，遇到问题无数，google了一大把关键字，看了一大叠邮件列表，终于把它在2.6.24内核上给装上了。赶紧写下来，免得以后遇到类似的问题再抓瞎。</p>

<p>（请注意青蛙给出命令的提示符，$表示不要求root权限，#表示必须用root权限执行）</p>

<blockquote><ol>
<li><p>到<a href="http://www.vmware.com/download/ws/">http://www.vmware.com/download/ws/</a>这里vmware6的安装包下载回来，总共有200多M。</p></li>
<li><p>下载安装包的同时，还需要准备一些包：<code>#aptitude install linux-source gcc-4.1 g++-4.1 libncurses5-dev</code>这些是linux源码包，还有gcc跟g++，待会编译模块会用到。</p></li>
<li><p>解压vmware6的安装文件$tar zxvf VMware-workstation-6.0.2-59824.i386.tar.gz。</p></li>
<li><p>$cd  vmware-distrib，然后执行#./vmware-install.pl。一路回车，到提示是否执行/usr/bin/vmware-config.pl这步时选择no。</p></li>
<li><p>$cd /usr/src，然后#tar jxvf linux-source-2.6.24.tar.bz2，再#ln -s linux-source-2.6.24 linux。</p></li>
<li><h1>cd linux，#make menuconfig，在General setup &ndash;>  Local version &ndash; append to kernel release选项中填入正在运行内核的子版本号（例如，青蛙的内核版本为2.6.24-1-686,那么就在这里填入-1-686，在这里青蛙困扰了好久，这回终于知道怎么写这个版本号了 :mrgreen: ）,然后保存退出，执行#make prepare。</h1></li>
<li><p>在<a href="http://vmkernelnewbies.googlegroups.com/web/vmware-any-any-update-116.tgz">这里</a>（<a href="http://blog.creonfx.com/temp/vmware-any-any-update-116.tgz">这里</a>和<a href="http://linuxtoy.org/files/vmware-any-any-update-116.tgz">这里</a>也分别有下载）下载vmware-any-any-update-116.tgz这个补丁。并解压：$tar zxvf vmware-any-any-update-116.tgz，然后$cd vmware-any-any-update116，执行#./runme.pl，当询问是否运行vmware-config.pl的时候，选择yes。（如果以上步骤执行正确，到这里应该能正确的编译vmware需要的各种模块了，如果出错，请google错误信息，一般都有结果的。）</p></li>
</ol>


<blockquote><p><strong>update:2008-03-18. </strong>今天青蛙再次在2.6.24内核上面安装vmware，编译模块时又出现了下面的错误信息：</p>

<blockquote><p> /bin/sh: scripts/genksyms/genksyms: 没有那个文件或目录
make[2]: <strong><em> [/tmp/vmware-config2/vmmon-only/linux/driver.o] 错误 1
make[1]: </em></strong> [<em>module</em>/tmp/vmware-config2/vmmon-only] 错误 2
make[1]: Leaving directory <code>/usr/src/linux-source-2.6.24'
make: *** [vmmon.ko] 错误 2
make: Leaving directory</code>/tmp/vmware-config2/vmmon-only&#8217;
Unable to build the vmmon module.</p></blockquote>

<p> 青蛙在源码目录执行了一下#make all，把genksyms这个模块编译一下就好了，真是一个很诡异的问题。</p></blockquote>

<ol>
<li>接下来就是配置虚拟网卡，按照自己的爱好配置就可以了。</li>
</ol>
</blockquote>

<ol>
<li><p>这一切都完成以后，会有一长串的许可协议冒出来，到最后输入yes就行了。</p></li>
<li><p>到这里，vmware就算完全安装完毕了，在gnome的菜单里找到vmware workstation运行之，然后输入序列号，就可以安装虚拟系统了。</p></li>
</ol>


<p>至于序列号，google上是，一抓一大把，青蛙就不提供了。 祝大家玩的愉快。 :smile:</p>

<p>文中提到的vmware-any-any-update-116.tgz补丁的下载：</p>

<p><a href="http://www.divshare.com/download/3938296-131">vmware-any-any-update-116.tgz (vmware-any-any-update-116.tgz)</a></p>

<p>参考文档：</p>

<p><a href="http://blog.creonfx.com/linux/how-to-install-vmware-player-workstation-on-2624-kernel">http://blog.creonfx.com/linux/how-to-install-vmware-player-workstation-on-2624-kernel</a></p>

<p><a href="http://linuxtoy.org/archives/vmware-and-kernel-2624.html">http://linuxtoy.org/archives/vmware-and-kernel-2624.html</a></p>

<p><a href="http://linux.bloghome.cn/posts/159172.html">http://linux.bloghome.cn/posts/159172.html </a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/03/solution-of-system-time-changes-cause-sudo-error/">修改系统时间引起sudo罢工的解决办法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-03T06:38:04+08:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>青蛙今天使用sudo之后，把系统时间往回调了几小时，然后sudo就罢工了，提示下面的信息：
sudo: timestamp too far in the future
改时间竟然还能改出毛病，这个sudo真是太fz了。青蛙拿着这个出错信息一google，发现了俩解决方法。</p>

<p>第一个，不黄很暴力，用root权限删除/var/run/sudo目录。
第二个，执行sudo -k，这个命令是用来清除sudo的时间戳，下次执行sudo的时候它会跟你重新要密码。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/94/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/92/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/01/01/2013-summary-and-2014-outlook/">2013年终总结及2014年新年目标</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/09/tour-of-qingdao-b/">青岛两日游（中）</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/09/tour-of-qingdao-a/">青岛两日游（上）</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/06/outing-jiming-dak-in-hebei/">探访鸡鸣驿</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/13/pic-of-dsic/">一张流：大连造船厂</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
