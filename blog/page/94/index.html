
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="前阵子pidgin从2.x版本升级到了2.3.1以后，青蛙的QQ的群名称就全部变成了NULL，然后所有群的消息都跑到了一起，看的我眼花缭乱。
于是青蛙就眼巴巴的等着pidgin的升级。这不，它终于升级到了2.4.0了，结果这个问题还是没改！ 看来老外是靠不住的，只能靠自己了。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yoursite.com/blog/page/94">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:yoursite.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/categories/gfrog-ride">骑行笔记</a></li>
    <li><a href="/categories/linux">Linux</a></li>
    <li><a href="/categories/picture">美丽图片</a></li>
    <li><a href="/categories/twitter-backup">Tweets</a></li>
    <li><a href="/blog/archives">全部日志</a></li>
    <li><a href="http://about.me/gfrog">关于我</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/02/solution-of-qq-null-group-name-in-pidgin/">pidgin中群名称变为NULL的解决办法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-02T18:21:58+08:00" pubdate data-updated="true">Mar 2<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>前阵子pidgin从2.x版本升级到了2.3.1以后，青蛙的QQ的群名称就全部变成了NULL，然后所有群的消息都跑到了一起，看的我眼花缭乱。
于是青蛙就眼巴巴的等着pidgin的升级。这不，它终于升级到了2.4.0了，结果这个问题还是没改！</p>

<p>看来老外是靠不住的，只能靠自己了。青蛙拿起google一划拉，还真找到点东西。
这不，<a href="http://www.linuxsir.org/bbs/thread323211.html">Linuxsir上的linuxahah同学说</a>，这是因为死TX修改了协议导致的，并且放出了一个补丁。但是这个补丁需要打到pidgin的源码里面重新编译，鉴于青蛙前N次编译pidgin的结果都是失败而告终，这个方法还是放弃了。</p>

<p>于是青蛙继续google，发现<a href="http://www.linuxsir.org/bbs/post1798882-10.html">Linuxsir的marklf大牛说</a>，这个问题还是因为pidgin中的libqq.so引起的，只要用以前版本的libqq.so替换现在的版本就可以了。这个方法很好很强大，只要找到2.x版本的libqq.so文件就，然后把它复制到/usr/lib/purple-2/就可以了。</p>

<p>困扰了青蛙好久的问题解决了，终于可以开心的聊QQ了 :D</p>

<hr />

<p><strong>更新：</strong>[2008-03-02 11:33] 放上日志里提到的补丁文件和libqq.so。</p>

<p><a href="http://www.divshare.com/download/3927060-345">qq patch for pidgin 2.3.1 (pidgin-2_3_1-qq_tar.bz2)</a></p>

<p><a href="http://www.divshare.com/download/3927059-f35">libqq.so in pidgin 2.2.2 (libqq-2_2_2.zip)</a></p>

<p>补丁文件需要解压到pidgin的源码目录下，然后用patch -p1 &lt; xxx.patch 来打源码补丁。大家各取所需吧。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/02/my-mind-deep-into-confusion/">陷入迷茫</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-02T05:53:16+08:00" pubdate data-updated="true">Mar 2<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>过了一个年，青蛙又长了一岁。
但是年过完了，青蛙却处于一种混沌状态，不知道自己应该干点什么，好不容易想做点事情，又没法专心。
想更新blog想了很久，找到几个有趣的东西想写，但是就是没法静下心来写一篇日志。
难道是一个假期把心放散了？
<strong>不能保持这种状况，要静下心，踏踏实实做点事情了！</strong></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/16/year-has-passed-and-formally-work-begin/">年关已过，正式开始工作</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-16T18:36:00+08:00" pubdate data-updated="true">Feb 16<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>终于过完年了。</p>

<p>在家闲了10多天，都快闲出毛病了。</p>

<p>明天，开始上班。</p>

<p>新的一年，新的起点。加油工作！</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/07/happy-spring-festival-2008/">鼠年大吉</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-07T07:56:11+08:00" pubdate data-updated="true">Feb 7<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.yupoo.com/photos/view?id=ff80808117e3fa660117ef53d0d60945"><img src="http://pic.yupoo.com/gfrog/3893350d45c7/k6d0lyxs.jpg" alt="medium" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/02/online-pinyin-input-method/">在线拼音输入法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-02T08:09:26+08:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://dict.cn/img/logo1.gif" alt="" />
dict.cn的在线拼音输入法，实在是居家旅行，杀人越货，聊天泡妞必备。</p>

<p>要使用，请猛击  <a href="http://dict.cn/ime/">http://dict.cn/ime/</a>
<a href="http://www.yupoo.com/photos/view?id=ff80808117d097b70117d5bf4d5e5fce"><img src="http://pic.yupoo.com/gfrog/85151506b967/medium.jpg" alt="online-ime" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/27/kde-beyond-linux-windows-and-mac-os-x-desktop-environment/">KDE：跨越Linux、Windows和Mac OS X的桌面环境</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-27T00:35:02+08:00" pubdate data-updated="true">Jan 27<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://pic.yupoo.com/gfrog/855075025a63/odu22jqq.jpg" alt="" /> KDE，这个Linux/Unix下华丽丽的桌面环境，正在走向Windows和Mac OS X。一些核心的KDE程序，还有其他重要的应用软件，例如KOffice和Amarok，已经开始向这两个平台移植。</p>

<p>这些成就除了因为KDE4的新特性，例如Phonon和Solid，还因为<a href="http://trolltech.com/products/qt/licenses/licensing/opensource">Trolltech在Qt4的windows版本中也采用了GPL许可</a>。大家都知道，Qt使用双许可证，对于开源软件的开发可以使用GPL许可证，对于专有软件就需要用商业许可来授权。但是，在Qt以前的版本中，只有Mac OS X和Linux/X11版本才有GPL许可。这次伴随着Qt4的发布，windows版本的Qt也终于可以使用GPL许可证了。这个变化最终打开了开源的KDE应用程序通向windows的大门。</p>

<p>当然，KDE开发社区使用<a href="http://www.cmake.org/HTML/Index.html">CMake</a>来替代Autotools也是使KDE走向这三大系统的一个重要原因。</p>

<h5><strong>Windows下的KDE</strong></h5>

<p>现在（其实是从1月22号起），<a href="http://windows.kde.org/news.php#itemKDEmirrorsavailableandnewsnapshotrelease">从KDE的镜像站点中就能下载到二进制的Windows版本的KDE环境</a>了 。从<a href="http://download.cegit.de/kde-windows/installer/kdewin-installer-gui-latest.exe">这里</a>可以下载到一个安装程序，用户可以通过这个小程序选择自己需要的KDE包。这个小程序可以自动解决包依赖问题，下载并安装需要的包。</p>

<p>现在windows版本的KDE看起来更像是mingw的一个超集，它里面包含了很多mingw的应用程序，例如gcc、gdb、tar、patch等等。再加上KDE自身的应用程序，就构成了现在的windows版KDE。</p>

<p>青蛙在自己的机器上安装了一下，简单介绍一下安装过程。</p>

<p><a href="http://www.yupoo.com/photos/view?id=ff80808117c46cc20117c489d7d20583"><img src="http://pic.yupoo.com/gfrog/03228502519b/medium.jpg" alt="kdewin-1" /></a> <a href="http://www.yupoo.com/photos/view?id=ff80808117c46cc20117c489ee170585"><img src="http://pic.yupoo.com/gfrog/6026550251a0/medium.jpg" alt="kdewin-2" /></a> <a href="http://www.yupoo.com/photos/view?id=ff80808117c46c760117c489f3cc055c"><img src="http://pic.yupoo.com/gfrog/8888050251a2/medium.jpg" alt="kdewin-3" /></a> <a href="http://www.yupoo.com/photos/view?id=ff80808117c46c190117c48a16be038d"><img src="http://pic.yupoo.com/gfrog/4605450251a4/medium.jpg" alt="kdewin-4" /></a> <a href="http://www.yupoo.com/photos/view?id=ff80808117c46c2a0117c48a07d60542"><img src="http://pic.yupoo.com/gfrog/8885050251a7/medium.jpg" alt="kdewin-5" /></a> <a href="http://www.yupoo.com/photos/view?id=ff80808117c46cc20117c48a2044058a"><img src="http://pic.yupoo.com/gfrog/3916650251ae/medium.jpg" alt="kdewin-6" /></a> <a href="http://www.yupoo.com/photos/view?id=ff80808117c46cc20117c48a36c9058c"><img src="http://pic.yupoo.com/gfrog/7352550251b3/medium.jpg" alt="kdewin-7" /></a> <a href="http://www.yupoo.com/photos/view?id=ff80808117c46bd70117c489e353027e"><img src="http://pic.yupoo.com/gfrog/237275025197/medium.jpg" alt="kdewin-8" /></a> <a href="http://www.yupoo.com/photos/view?id=ff80808117c46b110117c4b0f7691015"><img src="http://pic.yupoo.com/gfrog/752965025b96/medium.jpg" alt="kdewin-9" /></a></p>

<p>结果装上以后所有的程序都没法执行，提示缺少libkdecore.dll文件。把所有的包装上也没有这个文件，看来这应该是个bug了，难道是跟青蛙只选择了MinGW的文件有关？这样进一步的测试也就没法进行了。只好等待它的新版本了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/26/linux-kernel-2-6-24-released/">Linux Kernel 2.6.24 发布</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-26T21:51:28+08:00" pubdate data-updated="true">Jan 26<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>嗯，两句话。</p>

<p>第一，Linux内核2.6系列最新稳定版2.6.24正式发布。</p>

<p>第二，不知道在<a href="http://kernel.org/pub/linux/kernel/v2.6/ChangeLog-2.6.24">这份5.7M的Changelog</a>里面，包不包含修复vmware6.0无法安装这个错误的记录。</p>

<p><a href="http://kernel.org/"> </a><a href="http://kernel.org/"><img src="http://kernel.org/images/korg10yr.gif" alt="" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/22/history-of-network-in-jlu/">吉林大学校园网的那些事</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-22T07:27:41+08:00" pubdate data-updated="true">Jan 22<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>今天倒腾自己的blog，发现还有这么一篇没写完的东东扔在那里。这篇东西应该是青蛙大四的时候写下的，但是只写到第三部分，而且里面有些说法应该是不对的。今天给它补充完整。希望看到的同学多给青蛙挑挑错，在这篇文章的基础上整理出一个吉大网络近代史。 好了，下面是正文。 嗯,现在吉大的校园网全面抽风中,校内的服务基本上是崩溃了.趁这个时间说说我所经历的校园网吧.</p>

<p>我计划将我所见到的吉大校园网划分为这么几个时代:</p>

<ol>
<li><p> 教育网的黄金时代</p></li>
<li><p> 电信网时代</p></li>
<li><p> BT时代</p></li>
<li><p> 时常抽风时代</p></li>
</ol>


<p>由于青蛙的时空观错乱,上面有些时代的划分可能有错误,期待有人能给我补上具体时间.</p>

<p>首先还是说一下吉大校园网的结构.</p>

<p>因为吉大有很多个校区,校区之间就用双路光纤互连,每个校区用7609作为核心,使用光纤向下连接各个区域的4006,然后4006再用光纤连接区域里面的各个楼,这就是所谓的光纤到楼了.然后各个楼的主交换机基本上都是3500系列,再向下连接就是用双绞线了,先是千兆线路连接到楼内各个机房,然后机房内交换机(大概一个机房5台左右)用级联的方式相连,这些机房内的交换机再向下就是用百兆线连接用户的电脑了.这个结构自从我上学开始,基本上没有变动,有的也是核心层的小变化.</p>

<p>（这个拓扑到后来自然是改了的，据说取消了4006这一层，路由全部到核心的7609上来做了。但是具体情况，青蛙就不知道了，还需要内部人士来确认。） <strong>1.教育网的黄金时代</strong></p>

<p>这个时代,教育网应该是走在时代的前端,因为那个时候ADSL跟小区宽带远远没有现在普及,速度也跟现在差的很远,于是我竟然以能有这么好的教育网而骄傲.</p>

<p>那个时候还没有像现在这么多的p2p文件交换方式,多的也就是ftp或者http站点,校内有相当多的ftp联盟,视频,动画,游戏这些都有专门的联盟来作.于是就成天挂在某个ftp上下些电影啦,游戏啦.这些ftp大多都限速,每ip在100k上下.偶那时候还是忍受着一个8G的小硬盘,经常是下来某个东西,赶紧看完或者玩完,然后接着去下.后来这些ftp联盟大多都销声匿迹了,据我知道至今仅存了功夫茶联盟的G1还在孜孜不倦的为大家贡献着电影.</p>

<p>当时教育网东北到北京的出口ms还是2条155M线路,但是去公共网上下东西还是飞快的,还记得当时最原意做的事情就是去PCHOME测试连接速度,通常都能达到1M左右.一次去长春的某个站点下载一个游戏,将近2G的游戏,不到半个小时就下载回来.这个速度还是相当赞的.</p>

<p>后来,<strike>教育网内的学校多了,吉大的学生多了,入网电脑也多了,教育网东北出口的瓶颈就显现了出来,经常是打开一个公共网的网页要好半天.据说那时候东北的学校一直在跟教育网要出口带宽,结果先是加到4条155M,然后再是增加一条1G线路,但是都很快的被占满.就有了吉大校园网的下一个时代.</strike>趁半夜去NIC版查了一下,换电信网主要是于是由于cernet对吉大限速引起:</p>

<blockquote><p>长春到沈阳仅有两条155M线路，其中多数带宽被吉林大学占用，从而引起了其它高校的不满，cernet开始对吉林大学限速，限定在180M，导致吉林大学出口带宽严重不足，引起师生的不满。</p></blockquote>

<p><strong>2.电信时代</strong></p>

<p>那时候网络中心跟学校申请,拿出据说是1千万RMB,跟中国电信租用了1kMB的带宽.于是吉大校园网的黄金时代来临了.</p>

<p>网络中心在核心加了一个路由,去教育网的连接就走教育网,去公网的就从电信出口NAT转发,这样两面的速度都相当理想.应该是这个时代后期,教育网东北出口加到了2.5G.</p>

<p>由于有直接的公网出口,所以网络游戏开始大面积风行,学校附近的网吧开始萧条.</p>

<p>那时候中国电信刚刚进入东北市场,网络铺设还不完善,经常出现某某地方的光纤断掉的情况,也没有备份线路,就得换回教育网用一阵子.那时候拿感觉,真是爬行.</p>

<p>当然换了电信线路也不是所有人都高兴的.因为在出口有NAT,所以公网上有很多ftp站点都没法登录了.特别是那些在外面有自己空间的人,一年半载的没法ftp登录自己的空间.于是这些人就经常的去NIC版骂街.</p>

<p>再后来,网络中心发现中国电信没有按合同开足1G的带宽,而是做了限速.先限定在360M内,后提高至400M.于是网络中心不干了,停止了跟NIC的合作,全部换回了教育网.</p>

<p><strong>3.BT时代</strong></p>

<p>BT是哪年开始流行的我就不清楚了,应该是学校还用电信出口的时候就有了.BT在吉大开始流传开来都是5Q的功劳,一开始还没有人管BT,后来网络中心发现电信出口内大部分的流量都被bt占用了,于是开始想尽办法封堵BT.</p>

<p>再后来,学校内出现了几个BT站点.大家可以在校园网里用bt了.校园网的带宽还是足够的,于是bt开始在吉大广泛的流传开来.</p>

<p>最开始的应该就是微盟了，这个BT站是由微电脑爱好者联盟（记不大清楚了，似乎是这个名字）发起并维护的。开始的时候微盟相当火爆，再加上网络中心的官方支持，发展的十分迅速，至少周围的同学都知道由这么一个微盟。后来，微盟内部出现了问题（具体问题青蛙就不知道了），开始衰落。最后，终于关站了事。虽然后来有一段时间又开了一段时间，但是那时候吉大燕子盛行，最后也只是不了了之。</p>

<p>这个吉大燕子，只要是那段时间（这段时间估计会延续到现在）的吉大学生，几乎没有人不知道了。据说燕子最开始就是从微盟里面分出来的，由于有商业支持，所以发展的相当快。一开始，燕子就抱定了做商业站点的想法，一切向赚钱发展，页首页脚都是广告，外带中间插播。对于贫瘠的校园娱乐生活，燕子的贡献是非常大的。青蛙周围的同学，每天自习回寝室，第一件事就是上燕子上看看。甚至，有些人毕业了，要找些视频或者游戏之类，还会去燕子。</p>

<p><strong>4.时常抽风时代</strong></p>

<p>（青蛙忘记当初为啥准备写这么一段，因为抽风是始终贯穿吉大校园网历史的，所以这个时代有起点，但是不会有终点。） <strong>5.补充
</strong>
青蛙毕竟离开学校久了，而且大四其间，电脑运回家，没有继续体验吉大网络的机会。按照吉大网络迅猛的发展速度，这其间又产生了不少的时代。所以，青蛙希望各位同学能帮青蛙补充上这段空白 :D 。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/22/config-file-in-debian-interfaces-1/">Debian里的配置文件：网卡配置/etc/network/interfaces（1）</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-22T07:27:22+08:00" pubdate data-updated="true">Jan 22<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>青蛙准备写一个系列文章，介绍一些Debian/Ubuntu里面常用的配置文件。
当然，Linux系统中的配置文件多如牛毛，青蛙见过配过的也只是寥寥几个。
不过，青蛙会把配置过的配置文件尽量详细的介绍一下，
一是方便自己以后查阅，二来也是为广大Debianer做贡献了。</em></p>

<p><em>下面开始正文。</em></p>

<p>话说Debian系的网卡配置跟Redhat系很不一样，
Redhat是放在/etc/sysconfig/network-scripts目录下面的一大堆文件里面，
要修改？你一个一个文件来过吧。
Debian系的则是存在/etc/network/interfaces文件里面，
无论有多少块网卡，统统扔在这个文件里。下面就来看一下这个文件的内容。</p>

<p>首先，一个基本的配置大概是下面这个样子：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">auto</span> <span class="n">lo</span>
</span><span class='line'><span class="n">iface</span> <span class="n">lo</span> <span class="n">inet</span> <span class="n">loopback</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># The primary network interface</span>
</span><span class='line'><span class="n">auto</span> <span class="n">eth0</span>
</span><span class='line'><span class="n">iface</span> <span class="n">eth0</span> <span class="n">inet</span> <span class="n">static</span>
</span><span class='line'>     <span class="n">address</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">42</span>
</span><span class='line'>     <span class="n">network</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>     <span class="n">netmask</span> <span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>     <span class="n">broadcast</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">255</span>
</span><span class='line'>     <span class="n">gateway</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span>
</span></code></pre></td></tr></table></div></figure>


<p>上面的配置中，</p>

<p>第1行跟第5行说明lo接口跟eth0接口会在系统启动时被自动配置；</p>

<p>第2行将lo接口设置为一个本地回环（loopback）地址；</p>

<p>第6行指出eth0接口具有一个静态的（static）IP配置；</p>

<p>第7行-第11行分别设置eth0接口的ip、网络号、掩码、广播地址和网关。</p>

<p>再来看一个更复杂点的：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">auto</span> <span class="n">eth0</span>
</span><span class='line'><span class="n">iface</span> <span class="n">eth0</span> <span class="n">inet</span> <span class="n">static</span>
</span><span class='line'>    <span class="n">address</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">42</span>
</span><span class='line'>    <span class="n">network</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>    <span class="n">netmask</span> <span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">128</span>
</span><span class='line'>    <span class="n">broadcast</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>    <span class="n">up</span> <span class="n">route</span> <span class="n">add</span> <span class="o">-</span><span class="n">net</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">128</span> <span class="n">netmask</span> <span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">128</span> <span class="n">gw</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span>
</span><span class='line'>    <span class="n">up</span> <span class="n">route</span> <span class="n">add</span> <span class="n">default</span> <span class="n">gw</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">200</span>
</span><span class='line'>    <span class="n">down</span> <span class="n">route</span> <span class="n">del</span> <span class="n">default</span> <span class="n">gw</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">200</span>
</span><span class='line'>    <span class="n">down</span> <span class="n">route</span> <span class="n">del</span> <span class="o">-</span><span class="n">net</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">128</span> <span class="n">netmask</span> <span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">128</span> <span class="n">gw</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">2</span>
</span></code></pre></td></tr></table></div></figure>


<p>这次，有了一个复杂一些的掩码，和一个比较奇怪的广播地址。
还有就是增加的接口启用、禁用时的路由设置；</p>

<p>第7行和8行配置的左右是在接口启用的时候，添加一条静态路由和一个缺省路由；</p>

<p>第9行和10行会在接口禁用的时候，删掉这两条路由配置。</p>

<p>至于配置路由的写法，仔细看，它就是route命令嘛。</p>

<p>继续，下面是一个物理网卡上多个接口的配置方法：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">auto</span> <span class="n">eth0</span> <span class="ss">eth0</span><span class="p">:</span><span class="mi">1</span>
</span><span class='line'><span class="n">iface</span> <span class="n">eth0</span> <span class="n">inet</span> <span class="n">static</span>
</span><span class='line'>    <span class="n">address</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">100</span>
</span><span class='line'>    <span class="n">network</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>    <span class="n">netmask</span> <span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>    <span class="n">broadcast</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">255</span>
</span><span class='line'>    <span class="n">gateway</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span>
</span><span class='line'><span class="n">iface</span> <span class="ss">eth0</span><span class="p">:</span><span class="mi">1</span> <span class="n">inet</span> <span class="n">static</span>
</span><span class='line'>    <span class="n">address</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">200</span>
</span><span class='line'>    <span class="n">network</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>    <span class="n">netmask</span> <span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>8行到11行在eth0上配置了另外一个地址，
这种配置方法在配置一块网卡多个地址的时候很常见：有几个地址就配置几个接口。
冒号后面的数字可以随便写的，只要几个配置的名字不重复就可以。</p>

<p>下面是pre-up和post-down命令时间。
这是一组命令（pre-up、up、post-up、pre-down、down、post-down），分别定义在对应的时刻需要执行的命令。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">auto</span> <span class="n">eth0</span>
</span><span class='line'><span class="n">iface</span> <span class="n">eth0</span> <span class="n">inet</span> <span class="n">dhcp</span>
</span><span class='line'>    <span class="n">pre</span><span class="o">-</span><span class="n">up</span> <span class="o">[</span> <span class="o">-</span><span class="n">f</span> <span class="sr">/etc/ne</span><span class="n">twork</span><span class="o">/</span><span class="n">local</span><span class="o">-</span><span class="n">network</span><span class="o">-</span><span class="n">ok</span> <span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>第3行会在激活eth0之前检查/etc/network/local-network-ok文件是否存在，如果不存在，则不会激活eth0。</p>

<p>再更进一步的例子：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">auto</span> <span class="n">eth0</span> <span class="n">eth1</span>
</span><span class='line'><span class="n">iface</span> <span class="n">eth0</span> <span class="n">inet</span> <span class="n">static</span>
</span><span class='line'>    <span class="n">address</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">42</span><span class="o">.</span><span class="mi">1</span>
</span><span class='line'>    <span class="n">netmask</span> <span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>    <span class="n">pre</span><span class="o">-</span><span class="n">up</span> <span class="sr">/path/</span><span class="n">to</span><span class="o">/</span><span class="n">check</span><span class="o">-</span><span class="n">mac</span><span class="o">-</span><span class="n">address</span><span class="o">.</span><span class="n">sh</span> <span class="n">eth0</span> <span class="mi">11</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">66</span>
</span><span class='line'>    <span class="n">pre</span><span class="o">-</span><span class="n">up</span> <span class="sr">/usr/</span><span class="n">local</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">enable</span><span class="o">-</span><span class="n">masq</span>
</span><span class='line'><span class="n">iface</span> <span class="n">eth1</span> <span class="n">inet</span> <span class="n">dhcp</span>
</span><span class='line'>    <span class="n">pre</span><span class="o">-</span><span class="n">up</span> <span class="sr">/path/</span><span class="n">to</span><span class="o">/</span><span class="n">check</span><span class="o">-</span><span class="n">mac</span><span class="o">-</span><span class="n">address</span><span class="o">.</span><span class="n">sh</span> <span class="n">eth1</span> <span class="ss">AA</span><span class="p">:</span><span class="ss">BB</span><span class="p">:</span><span class="ss">CC</span><span class="p">:</span><span class="ss">DD</span><span class="p">:</span><span class="ss">EE</span><span class="p">:</span><span class="no">FF</span>
</span><span class='line'>    <span class="n">pre</span><span class="o">-</span><span class="n">up</span> <span class="sr">/usr/</span><span class="n">local</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">firewall</span>
</span></code></pre></td></tr></table></div></figure>


<p>第5行和第8行中，check-mac-address.sh放在/usr/share/doc/ifupdown/examples/目录中，
使用的时候需要给它加上可执行权限。
这两行命令会检测两块网卡的MAC地址是否为11:22:33:44:55:66和AA:BB:CC:DD:EE:FF，如果正确，则启用网卡。
如果MAC地址错误，就不会启用这两块网卡。</p>

<p>第6行和第9行是假定在这两块网卡上分别执行的命令，你可以把它们替换成你想要的任何玩意 ：）</p>

<p>手册上说，这种方法主要是用来检测两块网卡的MAC地址交换（If their MAC addresses get swapped），
其实就是两块网卡名互换了，这种情况在debian系统上再常见不过了， 主要是因为内核识别网卡的顺序发生了变化。
（<strong>更新： 2013-05-19 自从有了udev，这种情况应该比较少发生了。</strong>）</p>

<p>这个问题可以用下面的这种方法来避免。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">auto</span> <span class="n">eth0</span> <span class="n">eth1</span>
</span><span class='line'><span class="n">mapping</span> <span class="n">eth0</span> <span class="n">eth1</span>
</span><span class='line'>    <span class="n">script</span> <span class="sr">/path/</span><span class="n">to</span><span class="o">/</span><span class="n">get</span><span class="o">-</span><span class="n">mac</span><span class="o">-</span><span class="n">address</span><span class="o">.</span><span class="n">sh</span>
</span><span class='line'>    <span class="n">map</span> <span class="mi">11</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">66</span> <span class="n">lan</span>
</span><span class='line'>    <span class="n">map</span> <span class="ss">AA</span><span class="p">:</span><span class="ss">BB</span><span class="p">:</span><span class="ss">CC</span><span class="p">:</span><span class="ss">DD</span><span class="p">:</span><span class="ss">EE</span><span class="p">:</span><span class="no">FF</span> <span class="n">internet</span>
</span><span class='line'><span class="n">iface</span> <span class="n">lan</span> <span class="n">inet</span> <span class="n">static</span>
</span><span class='line'>    <span class="n">address</span> <span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">42</span><span class="o">.</span><span class="mi">1</span>
</span><span class='line'>    <span class="n">netmask</span> <span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">255</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'>    <span class="n">pre</span><span class="o">-</span><span class="n">up</span> <span class="sr">/usr/</span><span class="n">local</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">enable</span><span class="o">-</span><span class="n">masq</span> <span class="vg">$IFACE</span>
</span><span class='line'><span class="n">iface</span> <span class="n">internet</span> <span class="n">inet</span> <span class="n">dhcp</span>
</span><span class='line'>    <span class="n">pre</span><span class="o">-</span><span class="n">up</span> <span class="sr">/usr/</span><span class="n">local</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">firewall</span> <span class="vg">$IFACE</span>
</span></code></pre></td></tr></table></div></figure>


<p>第3行中的get-mac-address.sh也在/usr/share/doc/ifupdown/examples/目录里，
也同样要加可执行权限。
这个脚本的作用，就是获得每块网卡的MAC地址。</p>

<p>这段配置首先配置了两个逻辑接口（这个名词的定义请参见[1]）lan和internet，
然后根据网卡的MAC地址，将逻辑接口映射（mapped）到物理接口上去。</p>

<p>再来看下面这段配置：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">auto</span> <span class="n">eth0</span>
</span><span class='line'><span class="n">iface</span> <span class="n">eth0</span> <span class="n">inet</span> <span class="n">manual</span>
</span><span class='line'>    <span class="n">up</span> <span class="n">ifconfig</span> <span class="vg">$IFACE</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span> <span class="n">up</span>
</span><span class='line'>    <span class="n">up</span> <span class="sr">/usr/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">myconfigscript</span>
</span><span class='line'>    <span class="n">down</span> <span class="n">ifconfig</span> <span class="vg">$IFACE</span> <span class="n">down</span>
</span></code></pre></td></tr></table></div></figure>


<p>这段配置只是启用一个网卡，但是ifupdown不对这个网卡设置任何ip，而是由外部程序来设置ip。</p>

<p>最后一段配置，这段配置启用了网卡的混杂模式，用来当监听接口。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">auto</span> <span class="n">eth0</span>
</span><span class='line'><span class="n">iface</span> <span class="n">eth0</span> <span class="n">inet</span> <span class="n">manual</span>
</span><span class='line'>    <span class="n">up</span> <span class="n">ifconfig</span> <span class="vg">$IFACE</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span> <span class="n">up</span>
</span><span class='line'>    <span class="n">up</span> <span class="n">ip</span> <span class="n">link</span> <span class="n">set</span> <span class="vg">$IFACE</span> <span class="n">promisc</span> <span class="n">on</span>
</span><span class='line'>    <span class="n">down</span> <span class="n">ip</span> <span class="n">link</span> <span class="n">set</span> <span class="vg">$IFACE</span> <span class="n">promisc</span> <span class="n">off</span>
</span><span class='line'>    <span class="n">down</span> <span class="n">ifconfig</span> <span class="vg">$IFACE</span> <span class="n">down</span>
</span></code></pre></td></tr></table></div></figure>


<p>好了，interfaces中对于以太网卡的配置基本上介绍完了。
下一篇，青蛙打算介绍interfaces中更进一步的配置，例如ppp、vpn和无线网络等等，敬请期待 :p</p>

<p><strong>更新： 2013-05-19 这个系列没有继续下去确实很可惜。
不过5年过去了，Linux系统的网络配置发生了巨大的变化。
所以，重新再写一个关于Linux的系统配置的文章对于SysAdmin
来说还是有意义的。那么，就让青蛙找时间继续吧。</strong></p>

<p>Reference:</p>

<p>[1] <a href="http://www.debian.org/doc/manuals/reference/ch-gateway.zh-cn.html#s-net-reconf">debian参考手册</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/20/number-of-domains-on-one-dreamhost-server/">Dreamhost主机上的用户数</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-01-20T06:23:55+08:00" pubdate data-updated="true">Jan 20<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ssh到我的DH主机上总感觉慢慢的，很不爽。</p>

<p>今天在这里发现了下面两条命令，可以分别查看主机上ssh的用户数和总用户数。</p>

<p>grep -i /home/ /etc/passwd | wc -l</p>

<p>grep -i /home/ /etc/passwd | grep /bin/.*sh$ | wc -l</p>

<p>查了一下，我的空间所在的这个主机上有108个ssh帐户，379个ftp/ssh用户。</p>

<p>vmstat看下负载，真的是够高。</p>

<p>procs &mdash;&mdash;&mdash;&mdash;&mdash;-memory&mdash;&mdash;&mdash;&mdash;&mdash; &mdash;-swap&mdash; &mdash;&mdash;-io&mdash;&mdash; &mdash;system&mdash; &mdash;&mdash;cpu&mdash;&mdash;
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 0  0  41968 213368  66372 2950740    0    1     4     9    1     3 27  7 66  0</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/95/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/93/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/01/01/2013-summary-and-2014-outlook/">2013年终总结及2014年新年目标</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/09/tour-of-qingdao-b/">青岛两日游（中）</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/09/tour-of-qingdao-a/">青岛两日游（上）</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/06/outing-jiming-dak-in-hebei/">探访鸡鸣驿</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/13/pic-of-dsic/">一张流：大连造船厂</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
