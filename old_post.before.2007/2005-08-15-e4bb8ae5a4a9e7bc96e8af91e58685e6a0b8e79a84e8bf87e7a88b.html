
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>今天编译内核的过程 - My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="今天实在受不了电脑的启动速度，于是决定重新编译内核。 apt上看了下，结果只有2.6.8的内核。我记得testing源里已经有了2.6.12的内核了啊。没有也无所谓，咱去www.kernel.org自己下一个回来不就得了么。 下载回来以后，tar jxvf解开 扔进/usr/src/目录里 然后 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yoursite.com/old_post.before.2007/2005-08-15-e4bb8ae5a4a9e7bc96e8af91e58685e6a0b8e79a84e8bf87e7a88b.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:yoursite.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/categories/gfrog-ride">骑行笔记</a></li>
    <li><a href="/categories/linux">Linux</a></li>
    <li><a href="/categories/picture">美丽图片</a></li>
    <li><a href="/categories/twitter-backup">Tweets</a></li>
    <li><a href="/blog/archives">全部日志</a></li>
    <li><a href="http://about.me/gfrog">关于我</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">今天编译内核的过程</h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-08-16T07:29:22+08:00" pubdate data-updated="true">Aug 16<span>th</span>, 2005</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>今天实在受不了电脑的启动速度，于是决定重新编译内核。</p>

<p>apt上看了下，结果只有2.6.8的内核。我记得testing源里已经有了2.6.12的内核了啊。没有也无所谓，咱去www.kernel.org自己下一个回来不就得了么。</p>

<p>下载回来以后，tar jxvf解开 扔进/usr/src/目录里</p>

<p>然后</p>

<h1>cd linux-2.6.12.4</h1>

<h1>apt-get install libncurses5-dev kernel-package</h1>

<h1>make menuconfig</h1>

<p>这个版本配置选项跟2.6.8又有很多不同哦，又有很多新功能了。可惜我这破机器用不上。</p>

<p>伤心啊。</p>

<p>config完毕，配置文件自动保存为.config</p>

<p>然后</p>

<h1>make-kpkg kernel_image</h1>

<h1>cd ..</h1>

<h1>dpkg -i kernel-image-2.6.12.4_10.00.Custom_i386.deb</h1>

<p>结果重启后竟然kernel panic了.</p>

<p>感觉莫名其妙,于是跟着感觉修改了下配置文件,但是仍然启动不起来.</p>

<p>我想大概是缺少initrd.img, 于是重新</p>

<h1>make-kpkg &mdash;initrd kernel_image</h1>

<p>结果还是不行.</p>

<p>现在提示为:</p>

<p>pivot_root:No such file or directory</p>

<p>/sbin/init:432 cannot open dev/console:No such file</p>

<p>Kernel panic:Attempted to kill init!</p>

<p>google了一下, 有人认为这个错误是initrd文件引起的,有人认为是/etc/fstab文件混乱引起的,还有些是因为有特殊设备(像SATA RAID SCSI等等)引起的,还有的是grub版本问题, 总之各式各样,五花八门.</p>

<p>我按照这些逐项检查,也未发现错误&hellip;</p>

<p>纳闷,今天整不完了,明天继续.</p>

<p>恩 把/boot/grub/menu.lst跟/etc/fstab记下来.</p>

<h1>/boot/grub/menu.lst</h1>

<p>title Debian GNU/Linux, kernel 2.6.12.4</p>

<p>root (hd0,0)</p>

<p>kernel /boot/vmlinuz-2.6.12.4 root=/dev/hda1 ro</p>

<p>initrd /boot/initrd.img-2.6.12.4</p>

<p>savedefault</p>

<p>boot</p>

<p>title Debian GNU/Linux, kernel 2.6.12.4 (recovery mode)</p>

<p>root (hd0,0)</p>

<p>kernel /boot/vmlinuz-2.6.12.4 root=/dev/hda1 ro single</p>

<p>initrd /boot/initrd.img-2.6.12.4</p>

<p>savedefault</p>

<p>boot</p>

<p>title Debian GNU/Linux, kernel 2.6.11-1-386</p>

<p>root (hd0,0)</p>

<p>kernel /boot/vmlinuz-2.6.11-1-386 root=/dev/hda1 ro</p>

<p>initrd /boot/initrd.img-2.6.11-1-386</p>

<p>savedefault</p>

<p>boot</p>

<p>title Debian GNU/Linux, kernel 2.6.11-1-386 (recovery mode)</p>

<p>root (hd0,0)</p>

<p>kernel /boot/vmlinuz-2.6.11-1-386 root=/dev/hda1 ro single</p>

<p>initrd /boot/initrd.img-2.6.11-1-386</p>

<p>savedefault</p>

<p>boot</p>

<h1>/etc/fstab</h1>

<h1><file system> <mount point> <type> <options> <dump> <pass></h1>

<p>proc /proc proc defaults 0 0</p>

<p>/dev/hda1 / ext3 defaults,errors=remount-ro 0 1</p>

<p>/dev/hda5 none swap sw 0 0</p>

<p>/dev/hdb /media/cdrom0 iso9660 ro,user,noauto 0 0</p>

<p>/dev/fd0 /media/floppy0 auto rw,user,noauto 0 0</p>

<h1>ls /boot/</h1>

<p>config-2.6.11-1-386 initrd.img-2.6.11-1-386 System.map-2.6.12.4</p>

<p>config-2.6.12.4 initrd.img-2.6.12.4 vmlinuz-2.6.11-1-386</p>

<p>grub System.map-2.6.11-1-386 vmlinuz-2.6.12.4</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Your Name</span></span>

      








  


<time datetime="2005-08-16T07:29:22+08:00" pubdate data-updated="true">Aug 16<span>th</span>, 2005</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/linux-linux/'>linux[Linux]</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://yoursite.com/old_post.before.2007/2005-08-15-e4bb8ae5a4a9e7bc96e8af91e58685e6a0b8e79a84e8bf87e7a88b.html" data-via="" data-counturl="http://yoursite.com/old_post.before.2007/2005-08-15-e4bb8ae5a4a9e7bc96e8af91e58685e6a0b8e79a84e8bf87e7a88b.html" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/01/01/2013-summary-and-2014-outlook/">2013年终总结及2014年新年目标</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/09/tour-of-qingdao-b/">青岛两日游（中）</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/09/tour-of-qingdao-a/">青岛两日游（上）</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/06/outing-jiming-dak-in-hebei/">探访鸡鸣驿</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/13/pic-of-dsic/">一张流：大连造船厂</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
